# Jableè§†é¢‘ä¸‹è½½å·¥å…·

![Python Version](https://img.shields.io/badge/python-3.8%2B-blue)
![License](https://img.shields.io/badge/license-MIT-green)

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªè‡ªåŠ¨ä¸‹è½½Jable.TVè§†é¢‘çš„å·¥å…·ï¼Œæ”¯æŒåˆ†ç‰‡ä¸‹è½½ã€æ–‡ä»¶æ ¡éªŒã€è‡ªåŠ¨åˆå¹¶ç­‰åŠŸèƒ½ï¼Œå¹¶æä¾›Webç•Œé¢è¿›è¡Œå¯è§†åŒ–æ“ä½œã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… TSåˆ†ç‰‡å¤šçº¿ç¨‹ä¸‹è½½
- ğŸ” æ™ºèƒ½é¡µé¢è§£æï¼ˆæ”¯æŒè§£æè§†é¢‘ID/æ ‡é¢˜/æ¼”å‘˜/HLSåœ°å€/å°é¢ï¼‰
- ğŸ›¡ï¸ æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒï¼ˆåŸºäº16ä½å—å¤§å°æ£€æµ‹ï¼‰
- ğŸ”„ è‡ªåŠ¨åˆå¹¶TSæ–‡ä»¶ï¼ˆæ”¯æŒå¸¦/ä¸å¸¦ffmpegä¸¤ç§æ¨¡å¼ï¼‰
- ğŸ”’ é‡å¤æ–‡ä»¶è‡ªåŠ¨é‡å‘½åï¼ˆåŸºäºæ—¶é—´æˆ³ï¼‰
- ğŸ“¦ æ”¯æŒæ–­ç‚¹ç»­ä¼ 
- ğŸš¦ æ™ºèƒ½é‡è¯•æœºåˆ¶ï¼ˆæŒ‡æ•°é€€é¿ç®—æ³•ï¼‰

### Webç•Œé¢
- ğŸŒ æœ¬åœ°IPè‡ªåŠ¨æ£€æµ‹
- ğŸ“¤ åˆ†å—æ–‡ä»¶ä¸Šä¼ 
- ğŸ“Š ä¸Šä¼ è¿›åº¦æ˜¾ç¤º
- ğŸ” å®‰å…¨å¯†ç éªŒè¯ï¼ˆSHA-256åŠ å¯†ï¼‰
- ğŸ“ æ–‡ä»¶ç±»å‹ç™½åå•æ§åˆ¶

## é¡¹ç›®ç»“æ„
project-root/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Downloader.py        # TSä¸‹è½½/åˆå¹¶æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ PageParser.py        # HTMLè§£æå™¨ï¼ˆXPathæ¨¡å¼åŒ¹é…ï¼‰
â”‚   â”œâ”€â”€ Crawler.py           # çˆ¬è™«è°ƒåº¦å™¨
â”œâ”€â”€ Sender/
â”‚   â”œâ”€â”€ sender.py           # WebæœåŠ¡ä¸»æ¨¡å—
â”‚   â”œâ”€â”€ SenderConfig.py     # é…ç½®æ–‡ä»¶ï¼ˆä¸Šä¼ ç›®å½•/ç™½åå•/å¯†ç ç­‰ï¼‰
â”‚   â”œâ”€â”€ AutoIP.py           # ç½‘ç»œæœåŠ¡ç›¸å…³åŠŸèƒ½
â”‚   â””â”€â”€ static/             # å‰ç«¯èµ„æº
â””â”€â”€ config/                 # è¿è¡Œé…ç½®ç›®å½•

## å¿«é€Ÿå¼€å§‹
### å‰ç½®è¦æ±‚
- Python 3.8+
- FFmpegï¼ˆå¯é€‰ï¼Œç”¨äºåŠ é€Ÿåˆå¹¶ï¼‰
```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æ¨èç»„ä»¶
sudo apt install ffmpeg
class SenderConfig:
    upload_folder = 'uploads'  # æ–‡ä»¶å­˜å‚¨ç›®å½•
    allowed_extensions = {'mp4', 'ts'}  # å…è®¸ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹
    password = 'åŠ å¯†åçš„SHA256å¯†ç '  # ä½¿ç”¨tools/password_hasher.pyç”Ÿæˆ
    max_retries = 5  # æœ€å¤§é‡è¯•æ¬¡æ•°
    proxy = {'http': 'http://127.0.0.1:8080'}  # ä»£ç†è®¾ç½®
def _ts_is_corrupted(file_path):
    with open(file_path, 'rb') as f:
        return len(f.read()) % 16 != 0  # æ£€æµ‹16å­—èŠ‚å¯¹é½
# æŸ¥çœ‹åˆå¹¶æ—¥å¿—
tail -f logs/merge.logdef _ts_is_corrupted(file_path):
    with open(file_path, 'rb') as f:
        return len(f.read()) % 16 != 0  # æ£€æµ‹16å­—èŠ‚å¯¹é½
# åŸç”Ÿæ¨¡å¼ï¼ˆæ— ä¾èµ–ï¼‰
_merge_ts_without_ffmpeg()

# FFmpegæ¨¡å¼ï¼ˆæ¨èï¼‰
subprocess.run(['ffmpeg', '-f', 'concat', ...])


# å¸¸è§é”™è¯¯ç å¤„ç†ï¼š
# 403 Forbidden - æ£€æŸ¥ä»£ç†é…ç½®
# 404 Not Found - éªŒè¯è§†é¢‘URLæœ‰æ•ˆæ€§